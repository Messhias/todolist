{"ast":null,"code":"var _jsxFileName = \"/Users/collegia/Documents/projects/todolist/frontend/src/Pages/MainPage.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { erase, find, get, update } from \"../actions/Tasks\";\nimport { get as getStatus } from '../actions/Status';\nimport HeaderMenu from \"../components/HeaderMenu\";\nimport { Button, Grid } from \"@mui/material\";\nimport Pusher from 'pusher-js';\nimport TasksList from \"../components/MainPage/TasksList\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { DndProvider } from \"react-dnd\";\nimport TaskDetails from \"../components/Task/TaskDetails\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MainPage extends React.Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.handleChangeModal = function () {\n      let open = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return _this.setState({\n        taskModalOpen: !open\n      });\n    };\n\n    this.state = {\n      changeStatusOptionsOpen: false,\n      taskId: null,\n      taskModalOpen: false\n    };\n    this.props.get();\n    this.pusher = new Pusher(process.env.REACT_APP_PUSHER_ID, {\n      cluster: 'eu'\n    });\n    this.pusher.logToConsole = true;\n  }\n\n  componentDidMount() {\n    this.pusher.subscribe('my-channel').bind('my-event', () => this.props.get());\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props !== prevProps) {\n      const {\n        task = {}\n      } = this.props;\n\n      if (task === null || task === void 0 ? void 0 : task.id) {\n        this.setState({\n          taskModalOpen: true\n        });\n      } else {\n        this.setState({\n          taskModalOpen: false\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      tasks = [],\n      status = [],\n      task = {\n        id: 0,\n        name: \"\"\n      },\n      loading_tasks = false\n    } = this.props,\n          {\n      changeStatusOptionsOpen = false,\n      taskId = null,\n      taskModalOpen = false\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      id: \"main-page-container\",\n      xs: 12,\n      sm: 12,\n      lg: 12,\n      md: 12,\n      item: true,\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(HeaderMenu, {\n        history: this.props.history\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        id: \"main-page-buttons-container\",\n        xs: 12,\n        sm: 12,\n        lg: 12,\n        md: 12,\n        item: true,\n        container: true,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: () => this.props.history.push(\"/tasks/add\"),\n          children: \"ADD NEW TASK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DndProvider, {\n        backend: HTML5Backend,\n        children: /*#__PURE__*/_jsxDEV(TasksList, {\n          tasks: tasks !== null && tasks !== void 0 ? tasks : [],\n          status: status !== null && status !== void 0 ? status : [],\n          changeStatusOptionsOpen: changeStatusOptionsOpen,\n          taskId: taskId,\n          component: this,\n          getStatus: this.props.getStatus,\n          update: this.props.update,\n          erase: this.props.erase,\n          handleChangeModal: this.handleChangeModal,\n          taskModalOpen: taskModalOpen,\n          find: this.props.find,\n          history: this.props.history\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this), !loading_tasks && /*#__PURE__*/_jsxDEV(TaskDetails, {\n        handleChangeModal: this.handleChangeModal,\n        taskModalOpen: taskModalOpen,\n        find: this.props.find,\n        task: task,\n        update: this.props.update,\n        loading_tasks: loading_tasks,\n        status: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    StatusStore,\n    TasksStore\n  } = state;\n  return { ...StatusStore,\n    ...TasksStore\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  get: () => dispatch(get([\"status\"])),\n  getStatus: dispatch(getStatus()),\n  update: (id, body) => dispatch(update(id, body)),\n  erase: id => dispatch(erase(id)),\n  find: id => dispatch(find(id, ['status', \"status_history.status\"]))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);","map":{"version":3,"sources":["/Users/collegia/Documents/projects/todolist/frontend/src/Pages/MainPage.js"],"names":["React","connect","erase","find","get","update","getStatus","HeaderMenu","Button","Grid","Pusher","TasksList","HTML5Backend","DndProvider","TaskDetails","MainPage","Component","constructor","props","handleChangeModal","open","setState","taskModalOpen","state","changeStatusOptionsOpen","taskId","pusher","process","env","REACT_APP_PUSHER_ID","cluster","logToConsole","componentDidMount","subscribe","bind","componentDidUpdate","prevProps","prevState","snapshot","task","id","render","tasks","status","name","loading_tasks","history","push","mapStateToProps","StatusStore","TasksStore","mapDispatchToProps","dispatch","body"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {erase, find, get, update} from \"../actions/Tasks\";\nimport {get as getStatus} from '../actions/Status';\nimport HeaderMenu from \"../components/HeaderMenu\";\nimport {Button, Grid,} from \"@mui/material\";\nimport Pusher from 'pusher-js';\nimport TasksList from \"../components/MainPage/TasksList\";\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\nimport {DndProvider} from \"react-dnd\";\nimport TaskDetails from \"../components/Task/TaskDetails\";\n\n\nclass MainPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tchangeStatusOptionsOpen: false,\n\t\t\ttaskId: null,\n\t\t\ttaskModalOpen: false,\n\t\t};\n\t\tthis.props.get();\n\t\tthis.pusher = new Pusher(process.env.REACT_APP_PUSHER_ID, {\n\t\t\tcluster: 'eu'\n\t\t});\n\t\tthis.pusher.logToConsole = true;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.pusher.subscribe('my-channel')\n\t\t\t.bind('my-event', () => this.props.get());\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<P>, prevState: Readonly<S>, snapshot: SS) {\n\t\tif (this.props !== prevProps) {\n\t\t\tconst {\n\t\t\t\t\ttask = {}\n\t\t\t\t} = this.props;\n\n\t\t\tif (task?.id) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttaskModalOpen: true,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttaskModalOpen: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleChangeModal = (open = false) => this.setState({\n\t\ttaskModalOpen: !open,\n\t});\n\n\trender() {\n\t\tconst {\n\t\t\t\ttasks = [],\n\t\t\t\tstatus = [],\n\t\t\t\ttask = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: \"\",\n\t\t\t\t},\n\t\t\t\tloading_tasks = false,\n\t\t\t} = this.props,\n\t\t\t{\n\t\t\t\tchangeStatusOptionsOpen = false,\n\t\t\t\ttaskId = null,\n\t\t\t\ttaskModalOpen = false,\n\t\t\t} = this.state;\n\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tid={\"main-page-container\"}\n\t\t\t\txs={12}\n\t\t\t\tsm={12}\n\t\t\t\tlg={12}\n\t\t\t\tmd={12}\n\t\t\t\titem\n\t\t\t\tcontainer\n\t\t\t>\n\t\t\t\t<HeaderMenu history={this.props.history}/>\n\t\t\t\t<Grid\n\t\t\t\t\tid={\"main-page-buttons-container\"}\n\t\t\t\t\txs={12}\n\t\t\t\t\tsm={12}\n\t\t\t\t\tlg={12}\n\t\t\t\t\tmd={12}\n\t\t\t\t\titem\n\t\t\t\t\tcontainer\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={\"outlined\"}\n\t\t\t\t\t\tonClick={() => this.props.history.push(\"/tasks/add\")}\n\t\t\t\t\t>\n\t\t\t\t\t\tADD NEW TASK\n\t\t\t\t\t</Button>\n\t\t\t\t</Grid>\n\n\n\t\t\t\t<DndProvider backend={HTML5Backend}>\n\t\t\t\t\t<TasksList\n\t\t\t\t\t\ttasks={tasks ?? []}\n\t\t\t\t\t\tstatus={status ?? []}\n\t\t\t\t\t\tchangeStatusOptionsOpen={changeStatusOptionsOpen}\n\t\t\t\t\t\ttaskId={taskId}\n\t\t\t\t\t\tcomponent={this}\n\t\t\t\t\t\tgetStatus={this.props.getStatus}\n\t\t\t\t\t\tupdate={this.props.update}\n\t\t\t\t\t\terase={this.props.erase}\n\t\t\t\t\t\thandleChangeModal={this.handleChangeModal}\n\t\t\t\t\t\ttaskModalOpen={taskModalOpen}\n\t\t\t\t\t\tfind={this.props.find}\n\t\t\t\t\t\thistory={this.props.history}\n\t\t\t\t\t/>\n\t\t\t\t</DndProvider>\n\t\t\t\t{\n\t\t\t\t\t!loading_tasks && (\n\t\t\t\t\t\t<TaskDetails\n\t\t\t\t\t\t\thandleChangeModal={this.handleChangeModal}\n\t\t\t\t\t\t\ttaskModalOpen={taskModalOpen}\n\t\t\t\t\t\t\tfind={this.props.find}\n\t\t\t\t\t\t\ttask={task}\n\t\t\t\t\t\t\tupdate={this.props.update}\n\t\t\t\t\t\t\tloading_tasks={loading_tasks}\n\t\t\t\t\t\t\tstatus={status}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\tconst {\n\t\tStatusStore,\n\t\tTasksStore,\n\t} = state;\n\n\treturn {\n\t\t...StatusStore,\n\t\t...TasksStore,\n\t}\n}\n\nconst mapDispatchToProps = dispatch => ({\n\tget: () => dispatch(get([\n\t\t\"status\",\n\t])),\n\tgetStatus: dispatch(getStatus()),\n\tupdate: (id, body) => dispatch(update(id, body)),\n\terase: (id) => dispatch(erase(id)),\n\tfind: (id) => dispatch(find(id, ['status', \"status_history.status\"])),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);\n"]},"metadata":{},"sourceType":"module"}